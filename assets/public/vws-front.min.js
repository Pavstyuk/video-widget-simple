const hostName=window.location.origin,widgetStylesUrl=hostName+"/wp-content/plugins/video-widget-simple/assets/public/vws-front.min.css",linkStyle=`\n        <style id="vws-front-css">\n            @import url("${widgetStylesUrl}");\n        </style>`,getContent=hostName+"/wp-content/plugins/video-widget-simple/widget-get.php?key=vws-video-widget-simple";let thisPage=window.location.origin+window.location.pathname,thisPage_=thisPage.slice(0,-1),thisPath=window.location.pathname,thisPath_=thisPath.slice(0,-1);fetch(getContent).then((e=>e.json())).then((e=>{if(e.video.length>20)switch(e.page){case thisPath:buildWidget(e);break;case thisPage:buildWidget(e);break;case thisPath_:buildWidget(e);break;case thisPage_:buildWidget(e);break;case"":buildWidget(e);break}})).catch((e=>{}));const buildWidget=e=>{let t=e.width>160&&e.width<=720?e.width:240,s=e.delay>=0?e.delay:2e3;const a=document.createElement("div");a.classList.add("vws-widget-wrap"),a.classList.add("hidden"),e.color&&(a.style.borderColor=e.color);const i=document.createElement("video");i.classList.add("vws-widget-video"),i.setAttribute("width",t),i.dataset.status="none",i.muted=!0,i.loop=!0,i.controls=!1,i.autoplay=!1;const n=document.createElement("source");n.src=e.video,n.setAttribute("type","video/mp4"),i.append(n),a.append(i);const d=document.createElement("button");d.classList.add("vws-widget-close"),d.innerHTML="&#10005;";const o=document.createElement("button");o.classList.add("vws-widget-min"),o.innerHTML="&#8212;",a.append(d,o),document.body.insertAdjacentHTML("beforeend",linkStyle),document.body.append(a);(()=>{let e=document.querySelector(".vws-widget-wrap"),t=document.querySelector(".vws-widget-video");t.addEventListener("canplay",(()=>{runVideo(t,s)})),document.documentElement.addEventListener("click",(s=>{"vws-widget-close"===s.target.className&&(e.remove(),document.getElementById("vws-front-css").remove(),document.getElementById("vws-front-js").remove()),"vws-widget-min"===s.target.className&&(e.classList.remove("playing"),t.muted=!0,t.currentTime=0,t.play(),t.dataset.status="none"),"vws-widget-video"===s.target.className&&("play"==t.dataset.status?(t.pause(),t.dataset.status="none"):(e.classList.contains("playing")||(e.classList.add("playing"),t.currentTime=0,t.muted=!1,t.play(),t.dataset.status="play"),t.play(),t.dataset.status="play")),e.classList.contains("playing")&&"vws-widget-video"!=s.target.className&&"vws-widget-wrapper"!=s.target.className&&"vws-widget-min"!=s.target.className&&(e.classList.remove("playing"),t.muted=!0,t.currentTime=0,t.play(),t.dataset.status="none")}))})()},runVideo=(e,t)=>{let s=e.parentElement;setTimeout((()=>{e.autoplay=!0,e.play(),s.classList.remove("hidden")}),t)};